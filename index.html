<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive Studio for Explanatory Model Analysis • modelStudio</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- dalexverse --><link href="dalexverse.css" rel="stylesheet">
<link href="dalexverse-2.css" rel="stylesheet">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Interactive Studio for Explanatory Model Analysis">
<meta property="og:description" content="Automate the explanatory analysis of machine learning predictive models.
    Generate advanced interactive model explanations in the form of a serverless HTML
    site with only one line of code. This tool is model agnostic, therefore compatible
    with most of the black box predictive models and frameworks. The main function
    computes various (instance and dataset level) model explanations and produces
    a customisable dashboard, which consists of multiple panels for plots with their
    short descriptions. Easily save the dashboard and share it with others. Tools
    for Explanatory Model Analysis unite with tools for Exploratory Data Analysis
    to give a broad overview of the model behavior.">
<meta property="og:image" content="/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- google analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14"></script><script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="index.html">modelStudio</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">2.1.0</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ms-perks-features.html">modelStudio - perks and features</a>
    </li>
    <li>
      <a href="articles/ms-r-python-examples.html">modelStudio - R &amp; Python examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/modelStudio/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="interactive-studio-for-explanatory-model-analysis-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#interactive-studio-for-explanatory-model-analysis-" class="anchor"></a>Interactive Studio for Explanatory Model Analysis <img src="reference/figures/logo.gif" align="right" width="150">
</h1></div>

<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <code>modelStudio</code> package <strong>automates the Explanatory Analysis of Machine Learning predictive models</strong>. It generates advanced interactive model explanations in the form of a <strong>serverless HTML site</strong> with only one line of code. This tool is model agnostic, therefore compatible with most of the black box predictive models and frameworks (e.g. <code>mlr/mlr3</code>, <code>xgboost</code>, <code>caret</code>, <code>h2o</code>, <code>parsnip</code>, <code>tidymodels</code>, <code>scikit-learn</code>, <code>lightgbm</code>, <code>keras/tensorflow</code>).</p>
<p>The main <code><a href="reference/modelStudio.html">modelStudio()</a></code> function computes various (instance and dataset level) model explanations and produces a <strong>customisable dashboard</strong>, which consists of multiple panels for plots with their short descriptions. Easily <strong>save</strong>  the dashboard and <strong>share</strong> it with others. Tools for <a href="https://pbiecek.github.io/ema">Explanatory Model Analysis</a> unite with tools for Exploratory Data Analysis to give a broad overview of the model behavior.</p>
<!--- [explain FIFA19](https://pbiecek.github.io/explainFIFA19/) &emsp; --->
<!--- [explain Lung Cancer](https://github.com/hbaniecki/transparent_xai/) &emsp; --->
<p>            <a href="https://rai-covid.drwhy.ai"><strong>explain COVID-19</strong></a>   <a href="http://modelstudio.drwhy.ai/articles/ms-r-python-examples.html"><strong>R &amp; Python examples</strong></a>   <a href="http://modelstudio.drwhy.ai/#more-resources"><strong>More Resources</strong></a>   <a href="https://github.com/ModelOriented/modelStudio/issues/54"><strong>FAQ &amp; Troubleshooting</strong></a></p>
<p><img src="reference/figures/short.gif"></p>
<p>The <code>modelStudio</code> package is a part of the <a href="http://drwhy.ai"><strong>DrWhy.AI</strong></a> universe.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install from CRAN:</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"modelStudio"</span><span class="op">)</span>

<span class="co"># Install the development version from GitHub:</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ModelOriented/modelStudio"</span><span class="op">)</span></code></pre></div>
</div>
<div id="simple-demo" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-demo" class="anchor"></a>Simple Demo</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://ModelOriented.github.io/DALEX/">"DALEX"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://modelstudio.drwhy.ai">"modelStudio"</a></span><span class="op">)</span>

<span class="co"># fit a model</span>
<span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">survived</span> <span class="op">~</span><span class="va">.</span>, data <span class="op">=</span> <span class="va">titanic_imputed</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span>

<span class="co"># create an explainer for the model    </span>
<span class="va">explainer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ModelOriented.github.io/DALEX/reference/explain.html">explain</a></span><span class="op">(</span><span class="va">model</span>,
                     data <span class="op">=</span> <span class="va">titanic_imputed</span>,
                     y <span class="op">=</span> <span class="va">titanic_imputed</span><span class="op">$</span><span class="va">survived</span>,
                     label <span class="op">=</span> <span class="st">"Titanic GLM"</span><span class="op">)</span>

<span class="co"># make a studio for the model</span>
<span class="fu"><a href="reference/modelStudio.html">modelStudio</a></span><span class="op">(</span><span class="va">explainer</span><span class="op">)</span></code></pre></div>
<p><a href="http://modelstudio.drwhy.ai/#save--share">Save the output</a> in the form of a HTML file - <a href="https://modelstudio.drwhy.ai/demo.html"><strong>Demo Dashboard</strong></a>.</p>
<p><img src="reference/figures/long.gif"></p>
</div>
<div id="r--python-examples-more" class="section level2">
<h2 class="hasAnchor">
<a href="#r--python-examples-more" class="anchor"></a>R &amp; Python Examples <a href="https://modelstudio.drwhy.ai/articles/ms-r-python-examples.html">more</a>
</h2>
<hr>
<p>The <code><a href="reference/modelStudio.html">modelStudio()</a></code> function uses <code>DALEX</code> explainers created with <code><a href="https://ModelOriented.github.io/DALEX/reference/explain.html">DALEX::explain()</a></code> or <code>DALEXtra::explain_*()</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages for the explainer objects</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"DALEX"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"DALEXtra"</span><span class="op">)</span></code></pre></div>
<div id="mlr-dashboard" class="section level3">
<h3 class="hasAnchor">
<a href="#mlr-dashboard" class="anchor"></a>mlr <a href="https://modelstudio.drwhy.ai/mlr.html">dashboard</a>
</h3>
<p>Make a studio for the regression <code>ranger</code> model on <code>apartments</code> data.</p>
<details open><p><summary><strong><em>code</em></strong></summary></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load packages and data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">mlr</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">DALEXtra</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://modelstudio.drwhy.ai">modelStudio</a></span><span class="op">)</span>

<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">DALEX</span><span class="fu">::</span><span class="va"><a href="https://ModelOriented.github.io/DALEX/reference/apartments.html">apartments</a></span>

<span class="co"># split the data</span>
<span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="fl">0.7</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span>
<span class="va">train</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">index</span>,<span class="op">]</span>
<span class="va">test</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="va">index</span>,<span class="op">]</span>

<span class="co"># fit a model</span>
<span class="va">task</span> <span class="op">&lt;-</span> <span class="fu">makeRegrTask</span><span class="op">(</span>id <span class="op">=</span> <span class="st">"apartments"</span>, data <span class="op">=</span> <span class="va">train</span>, target <span class="op">=</span> <span class="st">"m2.price"</span><span class="op">)</span>
<span class="va">learner</span> <span class="op">&lt;-</span> <span class="fu">makeLearner</span><span class="op">(</span><span class="st">"regr.ranger"</span>, predict.type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span>
<span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">train</span><span class="op">(</span><span class="va">learner</span>, <span class="va">task</span><span class="op">)</span>

<span class="co"># create an explainer for the model</span>
<span class="va">explainer</span> <span class="op">&lt;-</span> <span class="fu">explain_mlr</span><span class="op">(</span><span class="va">model</span>,
                         data <span class="op">=</span> <span class="va">test</span>,
                         y <span class="op">=</span> <span class="va">test</span><span class="op">$</span><span class="va">m2.price</span>,
                         label <span class="op">=</span> <span class="st">"mlr"</span><span class="op">)</span>

<span class="co"># pick observations</span>
<span class="va">new_observation</span> <span class="op">&lt;-</span> <span class="va">test</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">new_observation</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id1"</span>, <span class="st">"id2"</span><span class="op">)</span>

<span class="co"># make a studio for the model</span>
<span class="fu"><a href="reference/modelStudio.html">modelStudio</a></span><span class="op">(</span><span class="va">explainer</span>, <span class="va">new_observation</span><span class="op">)</span></code></pre></div>
</details>
</div>
<div id="xgboost-dashboard" class="section level3">
<h3 class="hasAnchor">
<a href="#xgboost-dashboard" class="anchor"></a>xgboost <a href="https://modelstudio.drwhy.ai/xgboost.html">dashboard</a>
</h3>
<p>Make a studio for the classification <code>xgboost</code> model on <code>titanic</code> data.</p>
<details><p><summary><strong><em>code</em></strong></summary></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load packages and data</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dmlc/xgboost">xgboost</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ModelOriented.github.io/DALEX/">DALEX</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://modelstudio.drwhy.ai">modelStudio</a></span><span class="op">)</span>

<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">DALEX</span><span class="fu">::</span><span class="va"><a href="https://ModelOriented.github.io/DALEX/reference/titanic.html">titanic_imputed</a></span>

<span class="co"># split the data</span>
<span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="fl">0.7</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span>
<span class="va">train</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="va">index</span>,<span class="op">]</span>
<span class="va">test</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="va">index</span>,<span class="op">]</span>

<span class="va">train_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/model.matrix.html">model.matrix</a></span><span class="op">(</span><span class="va">survived</span> <span class="op">~</span><span class="va">.</span><span class="op">-</span><span class="fl">1</span>, <span class="va">train</span><span class="op">)</span>
<span class="va">test_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/model.matrix.html">model.matrix</a></span><span class="op">(</span><span class="va">survived</span> <span class="op">~</span><span class="va">.</span><span class="op">-</span><span class="fl">1</span>, <span class="va">test</span><span class="op">)</span>

<span class="co"># fit a model</span>
<span class="va">xgb_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xgboost/man/xgb.DMatrix.html">xgb.DMatrix</a></span><span class="op">(</span><span class="va">train_matrix</span>, label <span class="op">=</span> <span class="va">train</span><span class="op">$</span><span class="va">survived</span><span class="op">)</span>
<span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>max_depth <span class="op">=</span> <span class="fl">3</span>, objective <span class="op">=</span> <span class="st">"binary:logistic"</span>, eval_metric <span class="op">=</span> <span class="st">"auc"</span><span class="op">)</span>
<span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xgboost/man/xgb.train.html">xgb.train</a></span><span class="op">(</span><span class="va">params</span>, <span class="va">xgb_matrix</span>, nrounds <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>

<span class="co"># create an explainer for the model</span>
<span class="va">explainer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ModelOriented.github.io/DALEX/reference/explain.html">explain</a></span><span class="op">(</span><span class="va">model</span>,
                     data <span class="op">=</span> <span class="va">test_matrix</span>,
                     y <span class="op">=</span> <span class="va">test</span><span class="op">$</span><span class="va">survived</span>,
                     label <span class="op">=</span> <span class="st">"xgboost"</span><span class="op">)</span>

<span class="co"># pick observations</span>
<span class="va">new_observation</span> <span class="op">&lt;-</span> <span class="va">test_matrix</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, , drop<span class="op">=</span><span class="cn">FALSE</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">new_observation</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id1"</span>, <span class="st">"id2"</span><span class="op">)</span>

<span class="co"># make a studio for the model</span>
<span class="fu"><a href="reference/modelStudio.html">modelStudio</a></span><span class="op">(</span><span class="va">explainer</span>, <span class="va">new_observation</span>,
            options <span class="op">=</span> <span class="fu"><a href="reference/ms_options.html">ms_options</a></span><span class="op">(</span>margin_left <span class="op">=</span> <span class="fl">140</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</details><hr>
<p>The <code><a href="reference/modelStudio.html">modelStudio()</a></code> function uses <code>dalex</code> explainers created with <code>dalex.Explainer()</code>.</p>
<pre class="console"><code>:: package for the Explainer object
pip install dalex -U</code></pre>
<p>Use <code>pickle</code> Python module and <code>reticulate</code> R package to easily make a studio for a model.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># package for pickle load</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"reticulate"</span><span class="op">)</span></code></pre></div>
</div>
<div id="scikit-learn-dashboard" class="section level3">
<h3 class="hasAnchor">
<a href="#scikit-learn-dashboard" class="anchor"></a>scikit-learn <a href="https://modelstudio.drwhy.ai/scikitlearn.html">dashboard</a>
</h3>
<p>Make a studio for the regression <code>Pipeline SVR</code> model on <code>fifa</code> data.</p>
<details><p><summary><strong><em>code</em></strong></summary></p>
<p>First, use <code>dalex</code> in Python:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># load packages and data</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="im">import</span> dalex <span class="im">as</span> dx</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="im">from</span> sklearn.svm <span class="im">import</span> SVR</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="im">from</span> numpy <span class="im">import</span> log</span>
<span id="cb8-8"><a href="#cb8-8"></a></span>
<span id="cb8-9"><a href="#cb8-9"></a>data <span class="op">=</span> dx.datasets.load_fifa()</span>
<span id="cb8-10"><a href="#cb8-10"></a>X <span class="op">=</span> data.drop(columns<span class="op">=</span>[<span class="st">'overall'</span>, <span class="st">'potential'</span>, <span class="st">'value_eur'</span>, <span class="st">'wage_eur'</span>, <span class="st">'nationality'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-11"><a href="#cb8-11"></a>y <span class="op">=</span> log(data.value_eur)</span>
<span id="cb8-12"><a href="#cb8-12"></a></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co"># split the data</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y)</span>
<span id="cb8-15"><a href="#cb8-15"></a></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co"># fit a pipeline model</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>model <span class="op">=</span> Pipeline([(<span class="st">'scale'</span>, StandardScaler()), (<span class="st">'svm'</span>, SVR())])</span>
<span id="cb8-18"><a href="#cb8-18"></a>model.fit(X_train, y_train)</span>
<span id="cb8-19"><a href="#cb8-19"></a></span>
<span id="cb8-20"><a href="#cb8-20"></a><span class="co"># create an explainer for the model</span></span>
<span id="cb8-21"><a href="#cb8-21"></a>explainer <span class="op">=</span> dx.Explainer(model, data<span class="op">=</span>X_test, y<span class="op">=</span>y_test, label<span class="op">=</span><span class="st">'scikit-learn'</span>)</span>
<span id="cb8-22"><a href="#cb8-22"></a></span>
<span id="cb8-23"><a href="#cb8-23"></a><span class="co"># pack the explainer into a pickle file</span></span>
<span id="cb8-24"><a href="#cb8-24"></a>explainer.dump(<span class="bu">open</span>(<span class="st">'explainer_scikitlearn.pickle'</span>, <span class="st">'wb'</span>))</span></code></pre></div>
<p>Then, use <code>modelStudio</code> in R:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load the explainer from the pickle file</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">reticulate</span><span class="op">)</span>
<span class="va">explainer</span> <span class="op">&lt;-</span> <span class="fu">py_load_object</span><span class="op">(</span><span class="st">"explainer_scikitlearn.pickle"</span>, pickle <span class="op">=</span> <span class="st">"pickle"</span><span class="op">)</span>

<span class="co"># make a studio for the model</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://modelstudio.drwhy.ai">modelStudio</a></span><span class="op">)</span>
<span class="fu"><a href="reference/modelStudio.html">modelStudio</a></span><span class="op">(</span><span class="va">explainer</span>, B <span class="op">=</span> <span class="fl">5</span>,
            options <span class="op">=</span> <span class="fu"><a href="reference/ms_options.html">ms_options</a></span><span class="op">(</span>margin_left <span class="op">=</span> <span class="fl">160</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</details>
</div>
<div id="lightgbm-dashboard" class="section level3">
<h3 class="hasAnchor">
<a href="#lightgbm-dashboard" class="anchor"></a>lightgbm <a href="https://modelstudio.drwhy.ai/lightgbm.html">dashboard</a>
</h3>
<p>Make a studio for the classification <code>Pipeline LGBMClassifier</code> model on <code>titanic</code> data.</p>
<details><p><summary><strong><em>code</em></strong></summary></p>
<p>First, use <code>dalex</code> in Python:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># load packages and data</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="im">import</span> dalex <span class="im">as</span> dx</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler, OneHotEncoder</span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> SimpleImputer</span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="im">from</span> sklearn.compose <span class="im">import</span> ColumnTransformer</span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="im">from</span> lightgbm <span class="im">import</span> LGBMClassifier</span>
<span id="cb10-9"><a href="#cb10-9"></a></span>
<span id="cb10-10"><a href="#cb10-10"></a>data <span class="op">=</span> dx.datasets.load_titanic()</span>
<span id="cb10-11"><a href="#cb10-11"></a>X <span class="op">=</span> data.drop(columns<span class="op">=</span><span class="st">'survived'</span>)</span>
<span id="cb10-12"><a href="#cb10-12"></a>y <span class="op">=</span> data.survived</span>
<span id="cb10-13"><a href="#cb10-13"></a></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co"># split the data</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y)</span>
<span id="cb10-16"><a href="#cb10-16"></a></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co"># fit a pipeline model</span></span>
<span id="cb10-18"><a href="#cb10-18"></a>numerical_features <span class="op">=</span> [<span class="st">'age'</span>, <span class="st">'fare'</span>, <span class="st">'sibsp'</span>, <span class="st">'parch'</span>]</span>
<span id="cb10-19"><a href="#cb10-19"></a>numerical_transformer <span class="op">=</span> Pipeline(</span>
<span id="cb10-20"><a href="#cb10-20"></a>  steps<span class="op">=</span>[</span>
<span id="cb10-21"><a href="#cb10-21"></a>    (<span class="st">'imputer'</span>, SimpleImputer(strategy<span class="op">=</span><span class="st">'median'</span>)),</span>
<span id="cb10-22"><a href="#cb10-22"></a>    (<span class="st">'scaler'</span>, StandardScaler())</span>
<span id="cb10-23"><a href="#cb10-23"></a>  ]</span>
<span id="cb10-24"><a href="#cb10-24"></a>)</span>
<span id="cb10-25"><a href="#cb10-25"></a>categorical_features <span class="op">=</span> [<span class="st">'gender'</span>, <span class="st">'class'</span>, <span class="st">'embarked'</span>]</span>
<span id="cb10-26"><a href="#cb10-26"></a>categorical_transformer <span class="op">=</span> Pipeline(</span>
<span id="cb10-27"><a href="#cb10-27"></a>  steps<span class="op">=</span>[</span>
<span id="cb10-28"><a href="#cb10-28"></a>    (<span class="st">'imputer'</span>, SimpleImputer(strategy<span class="op">=</span><span class="st">'constant'</span>, fill_value<span class="op">=</span><span class="st">'missing'</span>)),</span>
<span id="cb10-29"><a href="#cb10-29"></a>    (<span class="st">'onehot'</span>, OneHotEncoder(handle_unknown<span class="op">=</span><span class="st">'ignore'</span>))</span>
<span id="cb10-30"><a href="#cb10-30"></a>  ]</span>
<span id="cb10-31"><a href="#cb10-31"></a>)</span>
<span id="cb10-32"><a href="#cb10-32"></a></span>
<span id="cb10-33"><a href="#cb10-33"></a>preprocessor <span class="op">=</span> ColumnTransformer(</span>
<span id="cb10-34"><a href="#cb10-34"></a>  transformers<span class="op">=</span>[</span>
<span id="cb10-35"><a href="#cb10-35"></a>    (<span class="st">'num'</span>, numerical_transformer, numerical_features),</span>
<span id="cb10-36"><a href="#cb10-36"></a>    (<span class="st">'cat'</span>, categorical_transformer, categorical_features)</span>
<span id="cb10-37"><a href="#cb10-37"></a>  ]</span>
<span id="cb10-38"><a href="#cb10-38"></a>)</span>
<span id="cb10-39"><a href="#cb10-39"></a></span>
<span id="cb10-40"><a href="#cb10-40"></a>classifier <span class="op">=</span> LGBMClassifier(n_estimators<span class="op">=</span><span class="dv">300</span>)</span>
<span id="cb10-41"><a href="#cb10-41"></a></span>
<span id="cb10-42"><a href="#cb10-42"></a>model <span class="op">=</span> Pipeline(</span>
<span id="cb10-43"><a href="#cb10-43"></a>  steps<span class="op">=</span>[</span>
<span id="cb10-44"><a href="#cb10-44"></a>    (<span class="st">'preprocessor'</span>, preprocessor),</span>
<span id="cb10-45"><a href="#cb10-45"></a>    (<span class="st">'classifier'</span>, classifier)</span>
<span id="cb10-46"><a href="#cb10-46"></a>  ]</span>
<span id="cb10-47"><a href="#cb10-47"></a>)</span>
<span id="cb10-48"><a href="#cb10-48"></a>model.fit(X_train, y_train)</span>
<span id="cb10-49"><a href="#cb10-49"></a></span>
<span id="cb10-50"><a href="#cb10-50"></a><span class="co"># create an explainer for the model</span></span>
<span id="cb10-51"><a href="#cb10-51"></a>explainer <span class="op">=</span> dx.Explainer(model, data<span class="op">=</span>X_test, y<span class="op">=</span>y_test, label<span class="op">=</span><span class="st">'lightgbm'</span>)</span>
<span id="cb10-52"><a href="#cb10-52"></a></span>
<span id="cb10-53"><a href="#cb10-53"></a><span class="co"># pack the explainer into a pickle file</span></span>
<span id="cb10-54"><a href="#cb10-54"></a>explainer.dump(<span class="bu">open</span>(<span class="st">'explainer_lightgbm.pickle'</span>, <span class="st">'wb'</span>)) </span></code></pre></div>
<p>Then, use <code>modelStudio</code> in R:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load the explainer from the pickle file</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">reticulate</span><span class="op">)</span>
<span class="va">explainer</span> <span class="op">&lt;-</span> <span class="fu">py_load_object</span><span class="op">(</span><span class="st">"explainer_lightgbm.pickle"</span>, pickle <span class="op">=</span> <span class="st">"pickle"</span><span class="op">)</span>

<span class="co"># make a studio for the model</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://modelstudio.drwhy.ai">modelStudio</a></span><span class="op">)</span>
<span class="fu"><a href="reference/modelStudio.html">modelStudio</a></span><span class="op">(</span><span class="va">explainer</span><span class="op">)</span></code></pre></div>
</details><hr>
</div>
</div>
<div id="save--share" class="section level2">
<h2 class="hasAnchor">
<a href="#save--share" class="anchor"></a>Save &amp; Share</h2>
<p>Save <code>modelStudio</code> as a HTML file using buttons on the top of the RStudio Viewer or with <a href="https://rstudio.github.io/r2d3/articles/publishing.html#save-as-html"><code>r2d3::save_d3_html()</code></a>.</p>
<p align="center" style="text-align: center;">
  <img src="reference/figures/controls.png"></p>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>If you use <code>modelStudio</code>, please cite our <a href="https://joss.theoj.org/papers/10.21105/joss.01798">JOSS article</a>:</p>
<pre><code>@article{modelStudio,
  author = {Hubert Baniecki and Przemyslaw Biecek},
  title = {{modelStudio}: Interactive Studio with Explanations for {ML} Predictive Models},
  doi = {10.21105/joss.01798},
  url = {https://doi.org/10.21105/joss.01798},
  year = {2019},
  month = {Nov},
  volume = {4},
  number = {43},
  pages = {1798},
  publisher = {The Open Journal},
  journal = {Journal of Open Source Software}
}</code></pre>
</div>
<div id="more-resources" class="section level2">
<h2 class="hasAnchor">
<a href="#more-resources" class="anchor"></a>More Resources</h2>
<ul>
<li><p>Theoretical introduction to the plots: <a href="https://pbiecek.github.io/ema">Explanatory Model Analysis: Explore, Explain and Examine Predictive Models</a></p></li>
<li><p>Vignettes: <a href="https://modelstudio.drwhy.ai/articles/ms-perks-features.html">modelStudio - perks and features</a> and <a href="https://modelstudio.drwhy.ai/articles/ms-r-python-examples.html">modelStudio - R &amp; Python examples</a></p></li>
<li><p>Changelog: <a href="https://modelstudio.drwhy.ai/news/index.html">NEWS</a></p></li>
<li><p>Conference poster: <a href="https://github.com/ModelOriented/modelStudio/blob/master/misc/MLinPL2019_modelStudio_poster.pdf">MLinPL2019</a></p></li>
<li><p>A preprint of <a href="https://arxiv.org/abs/2005.00497">The Grammar of Interactive Explanatory Model Analysis</a></p></li>
</ul>
</div>
<div id="acknowledgments" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgments" class="anchor"></a>Acknowledgments</h2>
<p>Work on this package was financially supported by the <code>NCN Opus grant 2016/21/B/ST6/02176</code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=modelStudio">https://​cloud.r-project.org/​package=modelStudio</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ModelOriented/modelStudio/">https://​github.com/​ModelOriented/​modelStudio/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ModelOriented/modelStudio/issues">https://​github.com/​ModelOriented/​modelStudio/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing modelStudio</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Hubert Baniecki <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-6661-5364" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Przemyslaw Biecek <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8423-1823" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=modelStudio"><img src="http://www.r-pkg.org/badges/version/modelStudio" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://github.com/ModelOriented/modelStudio/actions?query=workflow%3AR-CMD-check"><img src="https://github.com/ModelOriented/modelStudio/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://codecov.io/github/ModelOriented/modelStudio?branch=master"><img src="https://codecov.io/gh/ModelOriented/modelStudio/branch/master/graph/badge.svg" alt="Coverage Status"></a></li>
<li><a href="http://drwhy.ai/#AutoMat"><img src="https://img.shields.io/badge/DrWhy-AutoMat-ae2c87" alt="DrWhy-eXtrAI"></a></li>
<li><a href="https://joss.theoj.org/papers/9eec8c9d1969fbd44b3ea438a74af911"><img src="https://joss.theoj.org/papers/9eec8c9d1969fbd44b3ea438a74af911/status.svg" alt="JOSS-status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Hubert Baniecki, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
