<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Interactive Studio for Explanatory Model Analysis — modelStudio • modelStudio</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- dalexverse -->
<link href="../dalexverse.css" rel="stylesheet">
<link href="../dalexverse-2.css" rel="stylesheet">

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>






<meta property="og:title" content="Interactive Studio for Explanatory Model Analysis — modelStudio" />
<meta property="og:description" content="This function computes various (instance and dataset level) model explanations and
produces a customisable dashboard, which consists of multiple panels for plots with their
short descriptions. Easily save the dashboard and share it with others. Tools for
Explanatory Model Analysis unite with tools for
Exploratory Data Analysis to give a broad overview of the model behavior.
The extensive documentation covers:

Function parameters description -
 perks and features
Framework and model compatibility -
 R &amp;amp; Python examples
Theoretical introduction to the plots -
 Explanatory Model Analysis: Explore, Explain and Examine Predictive Models


Displayed variable can be changed by clicking on the bars of plots or with the first dropdown list,
 and observation can be changed with the second dropdown list.
The dashboard gathers useful, but not sensitive, information about how it is being used (e.g. computation length,
 package version, dashboard dimensions). This is for the development purposes only and can be blocked
 by setting telemetry to FALSE." />
<meta property="og:image" content="/logo.png" />

<meta name="robots" content="noindex" />


<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14""></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">modelStudio</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">2.1.1</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ms-perks-features.html">modelStudio - perks and features</a>
    </li>
    <li>
      <a href="../articles/ms-r-python-examples.html">modelStudio - R &amp; Python examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/modelStudio/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Interactive Studio for Explanatory Model Analysis</h1>
    <small class="dont-index">Source: <a href='https://github.com/ModelOriented/modelStudio/blob/master/R/modelStudio.R'><code>R/modelStudio.R</code></a></small>
    <div class="hidden name"><code>modelStudio.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function computes various (instance and dataset level) model explanations and
produces a customisable dashboard, which consists of multiple panels for plots with their
short descriptions. Easily save the dashboard and share it with others. Tools for
<a href='https://pbiecek.github.io/ema/'>Explanatory Model Analysis</a> unite with tools for
Exploratory Data Analysis to give a broad overview of the model behavior.</p>
<p>The extensive documentation covers:</p>
<ul>
<li><p>Function parameters description -
 <a href='https://modelstudio.drwhy.ai/articles/ms-perks-features.html'><b>perks and features</b></a></p></li>
<li><p>Framework and model compatibility -
 <a href='https://modelstudio.drwhy.ai/articles/ms-r-python-examples.html'><b>R &amp; Python examples</b></a></p></li>
<li><p>Theoretical introduction to the plots -
 <a href='https://pbiecek.github.io/ema/'>Explanatory Model Analysis: Explore, Explain and Examine Predictive Models</a></p></li>
</ul>

<p>Displayed variable can be changed by clicking on the bars of plots or with the first dropdown list,
 and observation can be changed with the second dropdown list.
The dashboard gathers useful, but not sensitive, information about how it is being used (e.g. computation length,
 package version, dashboard dimensions). This is for the development purposes only and can be blocked
 by setting <code>telemetry</code> to <code>FALSE</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>modelStudio</span><span class='op'>(</span><span class='va'>explainer</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for explainer</span>
<span class='fu'>modelStudio</span><span class='op'>(</span>
  <span class='va'>explainer</span>,
  new_observation <span class='op'>=</span> <span class='cn'>NULL</span>,
  new_observation_y <span class='op'>=</span> <span class='cn'>NULL</span>,
  new_observation_n <span class='op'>=</span> <span class='fl'>3</span>,
  facet_dim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>2</span><span class='op'>)</span>,
  time <span class='op'>=</span> <span class='fl'>500</span>,
  max_features <span class='op'>=</span> <span class='fl'>10</span>,
  N <span class='op'>=</span> <span class='fl'>300</span>,
  N_fi <span class='op'>=</span> <span class='va'>N</span> <span class='op'>*</span> <span class='fl'>10</span>,
  B <span class='op'>=</span> <span class='fl'>10</span>,
  B_fi <span class='op'>=</span> <span class='va'>B</span>,
  eda <span class='op'>=</span> <span class='cn'>TRUE</span>,
  show_info <span class='op'>=</span> <span class='cn'>TRUE</span>,
  parallel <span class='op'>=</span> <span class='cn'>FALSE</span>,
  options <span class='op'>=</span> <span class='fu'><a href='ms_options.html'>ms_options</a></span><span class='op'>(</span><span class='op'>)</span>,
  viewer <span class='op'>=</span> <span class='st'>"external"</span>,
  widget_id <span class='op'>=</span> <span class='cn'>NULL</span>,
  license <span class='op'>=</span> <span class='cn'>NULL</span>,
  telemetry <span class='op'>=</span> <span class='cn'>TRUE</span>,
  max_vars <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>explainer</th>
      <td><p>An <code>explainer</code> created with <code><a href='https://ModelOriented.github.io/DALEX/reference/explain.html'>DALEX::explain()</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other parameters.</p></td>
    </tr>
    <tr>
      <th>new_observation</th>
      <td><p>New observations with columns that correspond to variables used in the model.</p></td>
    </tr>
    <tr>
      <th>new_observation_y</th>
      <td><p>True label for <code>new_observation</code> (optional).</p></td>
    </tr>
    <tr>
      <th>new_observation_n</th>
      <td><p>Number of observations to be taken from the <code>explainer$data</code> if <code>new_observation = NULL</code>.
See <a href='https://modelstudio.drwhy.ai/articles/ms-perks-features.html#instance-explanations'><b>vignette</b></a></p></td>
    </tr>
    <tr>
      <th>facet_dim</th>
      <td><p>Dimensions of the grid. Default is <code><a href='https://rdrr.io/r/base/c.html'>c(2,2)</a></code>.</p></td>
    </tr>
    <tr>
      <th>time</th>
      <td><p>Time in ms. Set the animation length. Default is <code>500</code>.</p></td>
    </tr>
    <tr>
      <th>max_features</th>
      <td><p>Maximum number of features to be included in BD and SV plots.
Default is <code>10</code>.</p></td>
    </tr>
    <tr>
      <th>N</th>
      <td><p>Number of observations used for the calculation of PD and AD. Default is <code>300</code>.
See <a href='https://modelstudio.drwhy.ai/articles/ms-perks-features.html#more-calculations-means-more-time'><b>vignette</b></a></p></td>
    </tr>
    <tr>
      <th>N_fi</th>
      <td><p>Number of observations used for the calculation of FI. Default is <code>10*N</code>.</p></td>
    </tr>
    <tr>
      <th>B</th>
      <td><p>Number of permutation rounds used for calculation of SV. Default is <code>10</code>.
See <a href='https://modelstudio.drwhy.ai/articles/ms-perks-features.html#more-calculations-means-more-time'><b>vignette</b></a></p></td>
    </tr>
    <tr>
      <th>B_fi</th>
      <td><p>Number of permutation rounds used for calculation of FI. Default is <code>B</code>.</p></td>
    </tr>
    <tr>
      <th>eda</th>
      <td><p>Compute EDA plots and Residuals vs Feature plot, which adds the data to the dashboard. Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>show_info</th>
      <td><p>Verbose a progress on the console. Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Speed up the computation using <code><a href='https://parallelmap.mlr-org.com/reference/parallelMap.html'>parallelMap::parallelMap()</a></code>.
See <a href='https://modelstudio.drwhy.ai/articles/ms-perks-features.html#parallel-computation'><b>vignette</b></a>.
This might interfere with showing progress using <code>show_info</code>.</p></td>
    </tr>
    <tr>
      <th>options</th>
      <td><p>Customize <code>modelStudio</code>. See <code><a href='ms_options.html'>ms_options</a></code> and
<a href='https://modelstudio.drwhy.ai/articles/ms-perks-features.html#additional-options-1'><b>vignette</b></a>.</p></td>
    </tr>
    <tr>
      <th>viewer</th>
      <td><p>Default is <code>external</code> to display in an external RStudio window.
Use <code>browser</code> to display in an external browser or
<code>internal</code> to use the RStudio internal viewer pane for output.</p></td>
    </tr>
    <tr>
      <th>widget_id</th>
      <td><p>Use an explicit element ID for the widget (rather than an automatically generated one).
Useful e.g. when using <code>modelStudio</code> with Shiny.
See <a href='https://modelstudio.drwhy.ai/articles/ms-perks-features.html#shiny-1'><b>vignette</b></a>.</p></td>
    </tr>
    <tr>
      <th>license</th>
      <td><p>Path to the file containing the license (<code>con</code> parameter passed to <code><a href='https://rdrr.io/r/base/readLines.html'>readLines()</a></code>).
It can be used e.g. to include the license for <code>explainer$data</code> as a comment in the source of <code>.html</code> output file.</p></td>
    </tr>
    <tr>
      <th>telemetry</th>
      <td><p>The dashboard gathers useful, but not sensitive, information about how it is being used (e.g. computation length,
package version, dashboard dimensions). This is for the development purposes only and can be blocked by setting <code>telemetry</code> to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>max_vars</th>
      <td><p>An alias for <code>max_features</code>. If provided, it will override the value.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the <code>r2d3, htmlwidget, modelStudio</code> class.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ul>
<li><p>The input object is implemented in <a href='https://modeloriented.github.io/DALEX/'><b>DALEX</b></a></p></li>
<li><p>Feature Importance, Ceteris Paribus, Partial Dependence and Accumulated Dependence explanations
   are implemented in <a href='https://modeloriented.github.io/ingredients/'><b>ingredients</b></a></p></li>
<li><p>Break Down and Shapley Values explanations are implemented in
   <a href='https://modeloriented.github.io/iBreakDown/'><b>iBreakDown</b></a></p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Vignettes: <a href='https://modelstudio.drwhy.ai/articles/ms-r-python-examples.html'><b>modelStudio - R &amp; Python examples</b></a>
and <a href='https://modelstudio.drwhy.ai/articles/ms-perks-features.html'><b>modelStudio - perks and features</b></a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://ModelOriented.github.io/DALEX/'>"DALEX"</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Welcome to DALEX (version: 2.0.1).</span>
#&gt; <span class='message'>Find examples and detailed introduction at: https://pbiecek.github.io/ema/</span>
#&gt; <span class='message'>Additional features will be available after installation of: ggpubr.</span>
#&gt; <span class='message'>Use 'install_dependencies()' to get all suggested dependencies</span></div><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://modelstudio.drwhy.ai'>"modelStudio"</a></span><span class='op'>)</span>

<span class='co'>#:# ex1 classification on 'titanic' data</span>

<span class='co'># fit a model</span>
<span class='va'>model_titanic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span><span class='op'>(</span><span class='va'>survived</span> <span class='op'>~</span><span class='va'>.</span>, data <span class='op'>=</span> <span class='va'>titanic_imputed</span>, family <span class='op'>=</span> <span class='st'>"binomial"</span><span class='op'>)</span>

<span class='co'># create an explainer for the model</span>
<span class='va'>explainer_titanic</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ModelOriented.github.io/DALEX/reference/explain.html'>explain</a></span><span class='op'>(</span><span class='va'>model_titanic</span>,
                             data <span class='op'>=</span> <span class='va'>titanic_imputed</span>,
                             y <span class='op'>=</span> <span class='va'>titanic_imputed</span><span class='op'>$</span><span class='va'>survived</span>,
                             label <span class='op'>=</span> <span class='st'>"Titanic GLM"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  Titanic GLM 
#&gt;   -&gt; data              :  2207  rows  8  cols 
#&gt;   -&gt; target variable   :  2207  values 
#&gt;   -&gt; predict function  :  yhat.glm  will be used ( <span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; predicted values  :  numerical, min =  0.008128381 , mean =  0.3221568 , max =  0.9731431  
#&gt;   -&gt; model_info        :  package stats , ver. 4.0.3 , task classification ( </span><span style='color: #BBBB00;'> default </span><span> ) 
#&gt;   -&gt; residual function :  difference between y and yhat ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; residuals         :  numerical, min =  -0.9628583 , mean =  -2.569729e-10 , max =  0.9663346  
#&gt;  </span><span style='color: #00BB00;'> A new explainer has been created! </span><span> </div><div class='input'>
<span class='co'># pick observations</span>
<span class='va'>new_observations</span> <span class='op'>&lt;-</span> <span class='va'>titanic_imputed</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>,<span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>new_observations</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lucas"</span>,<span class='st'>"James"</span><span class='op'>)</span>

<span class='co'># make a studio for the model</span>
<span class='fu'>modelStudio</span><span class='op'>(</span><span class='va'>explainer_titanic</span>,
            <span class='va'>new_observations</span>,
            N <span class='op'>=</span> <span class='fl'>200</span>,  B <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='co'># faster example</span>

<span class='co'># \donttest{</span>

<span class='co'>#:# ex2 regression on 'apartments' data</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"ranger"</span>, quietly<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/imbs-hl/ranger'>"ranger"</a></span><span class='op'>)</span>
  <span class='va'>model_apartments</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/ranger/man/ranger.html'>ranger</a></span><span class='op'>(</span><span class='va'>m2.price</span> <span class='op'>~</span><span class='va'>.</span> ,data <span class='op'>=</span> <span class='va'>apartments</span><span class='op'>)</span>

  <span class='va'>explainer_apartments</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ModelOriented.github.io/DALEX/reference/explain.html'>explain</a></span><span class='op'>(</span><span class='va'>model_apartments</span>,
                                  data <span class='op'>=</span> <span class='va'>apartments</span>,
                                  y <span class='op'>=</span> <span class='va'>apartments</span><span class='op'>$</span><span class='va'>m2.price</span><span class='op'>)</span>

  <span class='va'>new_apartments</span> <span class='op'>&lt;-</span> <span class='va'>apartments</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>,<span class='op'>]</span>
  <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>new_apartments</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ap1"</span>,<span class='st'>"ap2"</span><span class='op'>)</span>

  <span class='co'># change dashboard dimensions and animation length</span>
  <span class='fu'>modelStudio</span><span class='op'>(</span><span class='va'>explainer_apartments</span>,
              <span class='va'>new_apartments</span>,
              facet_dim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>3</span><span class='op'>)</span>,
              time <span class='op'>=</span> <span class='fl'>800</span><span class='op'>)</span>

  <span class='co'># add information about true labels</span>
  <span class='fu'>modelStudio</span><span class='op'>(</span><span class='va'>explainer_apartments</span>,
              <span class='va'>new_apartments</span>,
              new_observation_y <span class='op'>=</span> <span class='va'>new_apartments</span><span class='op'>$</span><span class='va'>m2.price</span><span class='op'>)</span>

  <span class='co'># don't compute EDA plots</span>
  <span class='fu'>modelStudio</span><span class='op'>(</span><span class='va'>explainer_apartments</span>,
              eda <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  ranger  ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; data              :  1000  rows  6  cols 
#&gt;   -&gt; target variable   :  1000  values 
#&gt;   -&gt; predict function  :  yhat.ranger  will be used ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; predicted values  :  numerical, min =  1852.093 , mean =  3489.113 , max =  6141.653  
#&gt;   -&gt; model_info        :  package ranger , ver. 0.12.1 , task regression ( </span><span style='color: #BBBB00;'> default </span><span> ) 
#&gt;   -&gt; residual function :  difference between y and yhat ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; residuals         :  numerical, min =  -399.2476 , mean =  -2.094116 , max =  587.1217  
#&gt;  </span><span style='color: #00BB00;'> A new explainer has been created! </span><span> </div><div class='output co'>#&gt; <span class='message'>`new_observation` argument is NULL. `new_observation_n` observations needed to calculate local explanations are taken from the data.</span></div><div class='input'>
<span class='co'>#:# ex3 xgboost model on 'HR' dataset</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span><span class='op'>(</span><span class='st'>"xgboost"</span>, quietly<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://github.com/dmlc/xgboost'>"xgboost"</a></span><span class='op'>)</span>
  <span class='va'>HR_matrix</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/model.matrix.html'>model.matrix</a></span><span class='op'>(</span><span class='va'>status</span> <span class='op'>==</span> <span class='st'>"fired"</span> <span class='op'>~</span> <span class='va'>.</span> <span class='op'>-</span><span class='fl'>1</span>, <span class='va'>HR</span><span class='op'>)</span>

  <span class='co'># fit a model</span>
  <span class='va'>xgb_matrix</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/xgboost/man/xgb.DMatrix.html'>xgb.DMatrix</a></span><span class='op'>(</span><span class='va'>HR_matrix</span>, label <span class='op'>=</span> <span class='va'>HR</span><span class='op'>$</span><span class='va'>status</span> <span class='op'>==</span> <span class='st'>"fired"</span><span class='op'>)</span>
  <span class='va'>params</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>max_depth <span class='op'>=</span> <span class='fl'>3</span>, objective <span class='op'>=</span> <span class='st'>"binary:logistic"</span>, eval_metric <span class='op'>=</span> <span class='st'>"auc"</span><span class='op'>)</span>
  <span class='va'>model_HR</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/xgboost/man/xgb.train.html'>xgb.train</a></span><span class='op'>(</span><span class='va'>params</span>, <span class='va'>xgb_matrix</span>, nrounds <span class='op'>=</span> <span class='fl'>300</span><span class='op'>)</span>

  <span class='co'># create an explainer for the model</span>
  <span class='va'>explainer_HR</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://ModelOriented.github.io/DALEX/reference/explain.html'>explain</a></span><span class='op'>(</span><span class='va'>model_HR</span>,
                          data <span class='op'>=</span> <span class='va'>HR_matrix</span>,
                          y <span class='op'>=</span> <span class='va'>HR</span><span class='op'>$</span><span class='va'>status</span> <span class='op'>==</span> <span class='st'>"fired"</span>,
                          label <span class='op'>=</span> <span class='st'>"xgboost"</span><span class='op'>)</span>

  <span class='co'># pick observations</span>
  <span class='va'>new_observation</span> <span class='op'>&lt;-</span> <span class='va'>HR_matrix</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, , drop<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>]</span>
  <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>new_observation</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id1"</span>, <span class='st'>"id2"</span><span class='op'>)</span>

  <span class='co'># make a studio for the model</span>
  <span class='fu'>modelStudio</span><span class='op'>(</span><span class='va'>explainer_HR</span>,
              <span class='va'>new_observation</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  xgboost 
#&gt;   -&gt; data              :  7847  rows  6  cols 
#&gt;   -&gt; target variable   :  7847  values 
#&gt;   -&gt; predict function  :  yhat.default will be used ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; predicted values  :  numerical, min =  1.158531e-06 , mean =  0.36388 , max =  0.9997931  
#&gt;   -&gt; model_info        :  package Model of class: xgb.Booster package unrecognized , ver. Unknown , task regression ( </span><span style='color: #BBBB00;'> default </span><span> ) 
#&gt;   -&gt; model_info        :  Model info detected regression task but 'y' is a logical .  ( </span><span style='color: #BB0000;'> WARNING </span><span> )
#&gt;   -&gt; model_info        :  By deafult regressions tasks supports only numercical 'y' parameter. 
#&gt;   -&gt; model_info        :  Consider changing to numerical vector.
#&gt;   -&gt; model_info        :  Otherwise I will not be able to calculate residuals or loss function.
#&gt;   -&gt; residual function :  difference between y and yhat ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; residuals         :  numerical, min =  -0.9830738 , mean =  -4.673149e-05 , max =  0.9703595  
#&gt;  </span><span style='color: #00BB00;'> A new explainer has been created! </span><span> </div><div class='output co'>#&gt; <span class='warning'>Warning: Coercing LHS to a list</span></div><div class='input'><span class='co'># }</span>

</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Hubert Baniecki, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


